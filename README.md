# SHINee Collection Tracker 💎

SHINeeのCD・グッズコレクションを管理・可視化するための個人開発Webアプリケーションです。
就職活動用のポートフォリオとして、「自分が本当に使いたいツール」を形にしました。

## 🌟 主な機能

- **進捗可視化ダッシュボード**: 
  - 全体の収集率をプログレスバーで表示。
  - メンバー別（円形バー）や国別（日本/韓国）の進捗状況をリアルタイムで集計。
- **コレクション管理**: 
  - 所持済みのエディションにチェックを入れるだけで進捗に反映。
- **ウィッシュリスト**: 
  - トラッカーページで「欲しい」ボタンを押したアイテムを自動リスト化。
- **ランダムアイテム管理**: 
  - 特典写真などのアップロード・管理機能。 
- **バッジシステム**: 
  - 特定の条件を達成するとバッジが光るゲーミフィケーション要素。

## 🛠 技術スタック

### バックエンド
- **Java 17 / Spring Boot**: データ管理・API作成（MasterDataController等）。
- **Supabase (PostgreSQL)**: データベース。
- **Supabase Storage**: クラウドストレージ（画像データの永続化に使用）。

### フロントエンド
- **HTML5 / CSS3**: `rem`や`vh`を用いた、スマホでも崩れないレスポンシブ設計。
- **JavaScript (Vanilla JS)**: UIの動的制御、非同期通信（Fetch API）。

## 📊 データベース設計 (ER図)

複雑なディスコグラフィを効率的に管理するため、**IDEF1X記法**に基づき正規化を行いました。

![ER図](./docs/er-diagram.png)
- [ER図の詳細 (PDF版)](./docs/er-diagram.pdf) ※主キー等の詳細確認用

### 設計の工夫
- **補足タイトル (`title_sub`)**: 
  韓国盤の「第○集」や「Repackage」、日本盤・韓国盤で同名タイトルが存在するアルバム/シングルの識別のために導入。これによりデータの一意性と視認性を両立させました。
- **「所持」と「ウィッシュリスト」の分離**: 
  `is_purchased` (所持フラグ) と `is_wishlist` (ウィッシュリストフラグ) を独立させることで、「持っているもの」の可視化だけでなく、「次に欲しいもの」をリストアップするユーザー体験(UX)を考慮した設計にしています。
- **柔軟な拡張性**: 
  「形態マスタ」と「ランダムアイテムマスタ」を切り出すことで、1つのCDに対して複数の特典アイテム（トレカ等）を紐付けられる 1:対:多 の関係を構築しています。

## 🏗 システム構成 (画像アップロードフロー)
PaaS環境でのデータ永続化課題を解決するため、以下のフローで画像を管理しています。

1. **Frontend (Vanilla JS)**: ユーザーが画像を選択し、バックエンドへ送信。
2. **Backend (Spring Boot)**: 受け取った画像を **Supabase Storage** へAPI経由で転送。
3. **Supabase Storage**: 画像を保存し、固有の **公開URL** をバックエンドに返却。
4. **Database (PostgreSQL)**: 返却された **公開URL** をレコードとして保存。
5. **Display**: フロントエンドがDBからURLを取得し、画像を表示。

## 💎 こだわりポイント

### 1. セキュリティと保守性
- **環境変数の活用**: DBの接続情報などの機密情報は、ソースコードに直接含めず環境変数（`launch.json`やサーバー設定）で管理。
- **コードの整理**: `js`ファイルを機能別に分割し、メンテナンス性を向上。

### 2. 徹底したレスポンシブ設計
- 就活での提示を意識し、スマホ・PCどちらで見てもレイアウトが美しく保たれるよう、相対単位（rem/vh）を徹底。

### 3. SHINeeの世界観を再現
- メンバー別のカラー（5色）をベースにしたデザイン。


## 📈 プロジェクトの成果：Java版 完成 (v1.0)
当初予定していたJavaバックエンドによる主要機能および、インフラの課題解決は**すべて完了**しました。

- [x] DB・バックエンド（Spring Boot）の完全連携
- [x] メンバー別・国別の進捗集計ロジックの実装
- [x] **Supabase Storageによる画像永続化の実装（Railway再起動対策）**
- [x] 環境変数によるセキュアな機密情報管理
- [x] 本番環境（Railway）へのデプロイ


## 🚀 次期アップデート計画：Version 2 (Laravel版)
Java(Spring Boot)版にて主要機能の構築とインフラ課題（永続化）の解決を完了したことを受け、現在は**次期「Version 2」の設計・学習フェーズ**に移行しています。

- **Java版 (v1.0) ※本リポジトリ**: 
  バックエンドの堅牢な設計を検証するプロトタイプとして「完結」。これまでの開発実績として公開を継続します。

- **Laravel版 (v2.0) [計画中]**: 
  さらなる開発効率の向上と、ユーザー別管理システムの導入、また公開当初の「今後の展望」の実現を目的としてリプレイスを計画しています。
  
  **＜主な実装予定機能＞**
  - **ユーザー別データ管理**: マイページ機能の実装。
  - **検索・フィルタの高度化**: 大量データへのアクセシビリティ向上。
  - **映像作品への対応**: DVD/Blu-rayを含めたデータ構造の拡張。
  - （その他、エラーハンドリングの強化やUI改良を順次計画）


### ✅ 課題解決済み

## ✅ 技術的課題の解決：画像の永続化対応

### 課題
Railway（PaaS）のファイルシステムが一時的（Ephemeral）であるため、アプリの再デプロイや再起動のたびに、ローカル（サーバー内）に保存したユーザーの画像データが消失する問題が発生しました。

### 解決策
- **外部ストレージへの移行**: 保存先をローカルから **Supabase Storage** へ変更。
- **API連携**: `OkHttp` を利用し、Javaバックエンドからクラウドへダイレクトに画像を飛ばすロジックを実装。
- **設計の変更**: 画像ファイルそのものではなく、生成された **UUID付きの公開URL** をDBに保存する形に改善。

### 効果
- インフラの再起動に左右されない、完全なデータの永続化を実現しました。
- サーバーのディスク容量を圧迫しない、スケーラブルな構成へと進化させました。